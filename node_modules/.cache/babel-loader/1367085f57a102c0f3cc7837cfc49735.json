{"ast":null,"code":"import { useReducer as t, useEffect as e, useRef as r, useState as o, useCallback as n } from \"react\";\n\nfunction s() {\n  return (s = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n\n      for (var o in r) Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o]);\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nconst c = (t, e) => {\n  if (!t.includes(e)) throw new Error(`'${e}' not found. It must be provided in initialState as a property key.`);\n},\n      a = \"production\" !== process.env.NODE_ENV ? Symbol(\"UPDATE_STATE\") : Symbol(),\n      l = (l, u) => {\n  const i = Object.keys(u);\n  let p = u,\n      d = null;\n  const f = {};\n  i.forEach(t => {\n    f[t] = new Set();\n  });\n\n  const E = (t, e) => e.type === a ? e.r ? e.r(t) : e.e : l(t, e),\n        S = (t, e) => {\n    \"production\" !== process.env.NODE_ENV && c(i, t);\n\n    const r = r => {\n      return s({}, r, {\n        [t]: (o = r[t], n = e, \"function\" == typeof n ? n(o) : n)\n      });\n      var o, n;\n    };\n\n    if (d) d({\n      type: a,\n      r\n    });else {\n      p = r(p);\n      const e = p[t];\n      f[t].forEach(t => t(e));\n    }\n  },\n        b = (t, e) => {\n    i.forEach(r => {\n      const o = e[r];\n      t[r] !== o && f[r].forEach(t => t(o));\n    });\n  };\n\n  return {\n    useGlobalStateProvider: () => {\n      const [o, n] = t(E, p);\n      e(() => {\n        if (d) throw new Error(\"Only one global state provider is allowed\");\n        return d = n, n({\n          type: a,\n          e: p\n        }), () => {\n          d = null;\n        };\n      }, []);\n      const s = r(o);\n      b(s.current, o), s.current = o, e(() => {\n        p = o;\n      }, [o]);\n    },\n    useGlobalState: t => {\n      \"production\" !== process.env.NODE_ENV && c(i, t);\n      const [r, s] = o(p[t]);\n      return e(() => (f[t].add(s), s(p[t]), () => {\n        f[t].delete(s);\n      }), [t]), [r, n(e => S(t, e), [t])];\n    },\n    getGlobalState: t => (\"production\" !== process.env.NODE_ENV && c(i, t), p[t]),\n    setGlobalState: S,\n    getState: () => p,\n    setState: t => {\n      if (d) d({\n        type: a,\n        e: t\n      });else {\n        const e = p;\n        p = t, b(e, p);\n      }\n    },\n    dispatch: t => {\n      if (d) d(t);else {\n        const e = p;\n        p = l(p, t), b(e, p);\n      }\n      return t;\n    }\n  };\n},\n      u = t => l((t, e) => t, t),\n      i = function (t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t(void 0, {\n    type: void 0\n  });\n  let r = arguments.length > 2 ? arguments[2] : undefined;\n  return r ? r(i)(t, e) : l(t, e);\n},\n      p = () => {\n  if (!window.__REDUX_DEVTOOLS_EXTENSION__) return t => t;\n\n  const {\n    before: t,\n    after: e\n  } = (() => {\n    let t, e;\n    return {\n      before: r => (o, n, c) => {\n        if (t = o, e = n, c) return c(r)(o, n);\n        const a = r(o, n);\n        return s({}, a, {\n          useGlobalState: t => {\n            const [e] = a.useGlobalState(t);\n            return [e, () => {\n              throw new Error(\"Update is not allowed when using DevTools\");\n            }];\n          }\n        });\n      },\n      after: r => (o, n, c) => {\n        if (c) return c(r)(o, n);\n        const a = r(t, e);\n        let l = s({}, o(n, {\n          type: \"@@redux/INIT\"\n        }), e);\n        const u = [];\n        return s({}, a, {\n          getState: () => l,\n          dispatch: t => (l = o(l, t), a.setState(l.computedStates[l.currentStateIndex].state), u.forEach(t => t()), t),\n          subscribe: t => (u.push(t), () => {\n            const e = u.indexOf(t);\n            u.splice(e, 1);\n          })\n        });\n      }\n    };\n  })();\n\n  return function () {\n    for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n      t[_key] = arguments[_key];\n    }\n\n    return t.reduce((t, e) => function () {\n      return t(e(...arguments));\n    });\n  }(t, window.__REDUX_DEVTOOLS_EXTENSION__(), e);\n};\n\nexport { u as createGlobalState, i as createStore, p as reduxDevToolsExt };","map":{"version":3,"mappings":";;;;;;;;;;;;AAcA;;AAAA,MASMA,IAAmB,CAACC,CAAD,EAAiBC,CAAjB,KAAiBA;AACxC,OAAKD,EAAKE,QAALF,CAAcC,CAAdD,CAAL,EACE,UAAUG,KAAV,CAAUA,IAAUF,sEAApB;AAAoBA,CAXxB;AAAA,MAiBMG,IACqB,iBAAzBC,QAAQC,GAARD,CAAYE,QAAa,GAAeC,OAAO,cAAPA,CAAf,GACFA,QAnBzB;AAAA,MA2BaC,IAAkB,CAC7BC,CAD6B,EAE7BC,CAF6B,KAE7BA;AAGA,QAAMX,IAAOY,OAAOZ,IAAPY,CAAYD,CAAZC,CAAb;AAEA,MAAIC,IAAcF,CAAlB;AAAA,MAKIG,IAAwD,IAL5D;AAOA,QAAMC,IAAY,EAAlB;AAGAf,IAAKgB,OAALhB,CAAciB;AAAUF,MAAUE,CAAVF,IAA8B,IAAIG,GAAJ,EAA9BH;AAAkCG,GAA1DlB;;AAEA,QAAMmB,IAAiB,CAACC,CAAD,EAAeC,CAAf,KAEhBA,EAA6BC,IAA7BD,KAAsCjB,CAAtCiB,GACKA,EAAsCE,CAAtCF,GACHA,EAAcE,CAAdF,CAA6BD,CAA7BC,CADGA,GAEHA,EAAcG,CAHhBH,GAKEX,EAAQU,CAARV,EAAeW,CAAfX,CAPT;AAAA,QAUMe,IAAiB,CACrBxB,CADqB,EAErByB,CAFqB,KAErBA;AAE6B,qBAAzBrB,QAAQC,GAARD,CAAYE,QAAa,IAC3BR,EAAiBC,CAAjBD,EAAuBE,CAAvBF,CAD2B;;AAG7B,UAAM4B,IAAWC;AAAAA,mBACZA,CADYA,EACZA;AACH3B,SAACA,CAADA,IA/DsB4B,IA+DED,EAAc3B,CAAd2B,CA/DFC,EAAiBC,IA+DUJ,CA/D3BG,EAFuC,qBAGlDC,CAHkD,GAIxDA,EAASD,CAATC,CAJwD,GAM1DA,CA2DH7B;AADG2B,OADYA;AA7DD,UAAQC,CAAR,EAAyBC,CAAzB;AAAyBA,KA6DzC;;AAIA,QAAIhB,CAAJ,EACEA,EAAe;AAAEQ,YAAMlB,CAAR;AAAsBmB;AAAtB,KAAfT,EADF,KAEO;AACLD,UAAcc,EAAQd,CAARc,CAAdd;AACA,YAAMkB,IAAmBlB,EAAYZ,CAAZY,CAAzB;AACAE,QAAUd,CAAVc,EAAoBC,OAApBD,CAA6BiB,KAAaA,EAASD,CAATC,CAA1CjB;AAAmDgB;AAAAA,GA1BvD;AAAA,QA8BME,IAAkB,CAACC,CAAD,EAAmBC,CAAnB,KAAmBA;AACzCnC,MAAKgB,OAALhB,CAAciB;AACZ,YAAMc,IAAmBI,EAAUlB,CAAVkB,CAAzB;AACID,QAAUjB,CAAViB,MAAgCH,CAAhCG,IACFnB,EAAUE,CAAVF,EAA4BC,OAA5BD,CAAqCiB,KAAaA,EAASD,CAATC,CAAlDjB,CADEmB;AACyDH,KAH/D/B;AAG+D+B,GAlCjE;;AA6GA,SAAO;AACLK,4BAvE6B;AAC7B,aAAOhB,CAAP,EAAciB,CAAd,IAA0BC,EAAWnB,CAAXmB,EAA2BzB,CAA3ByB,CAA1B;AACAC,QAAU;AACR,YAAIzB,CAAJ,EAAoB,UAAUX,KAAV,CAAgB,2CAAhB;AAOpB,eANAW,IAAiBuB,CAAjBvB,EAEAuB,EAAS;AAAEf,gBAAMlB,CAAR;AAAsBoB,aAAcX;AAApC,SAATwB,CAFAvB,EAGgB;AACdA,cAAiB,IAAjBA;AAAiB,SAEnB;AAFmB,OANrByB,EASG,EATHA;AAUA,YAAMC,IAAkBC,EAAOrB,CAAPqB,CAAxB;AACAR,QAAgBO,EAAgBE,OAAhCT,EAAyCb,CAAzCa,GACAO,EAAgBE,OAAhBF,GAA0BpB,CAD1Ba,EAEAM,EAAU;AACR1B,YAAcO,CAAdP;AAAcO,OADhBmB,EAEG,CAACnB,CAAD,CAFHmB,CAFAN;AAIIb,KAqDC;AAELuB,oBApDkD1C;AACrB,uBAAzBI,QAAQC,GAARD,CAAYE,QAAa,IAC3BR,EAAiBC,CAAjBD,EAAuBE,CAAvBF,CAD2B;AAG7B,aAAO6C,CAAP,EAAqBC,CAArB,IAAwCC,EAASjC,EAAYZ,CAAZY,CAATiC,CAAxC;AAaA,aAZAP,EAAU,OACRxB,EAAUd,CAAVc,EAAoBgC,GAApBhC,CAAwB8B,CAAxB9B,GACA8B,EAAgBhC,EAAYZ,CAAZY,CAAhBgC,CADA9B,EAEgB;AACdA,UAAUd,CAAVc,EAAoBiC,MAApBjC,CAA2B8B,CAA3B9B;AAA2B8B,OAJrB,CAAVN,EAOG,CAACtC,CAAD,CAPHsC,GAYO,CAACK,CAAD,EAJSK,EACbC,KAAuCzB,EAAexB,CAAfwB,EAAyByB,CAAzBzB,CAD1BwB,EAEd,CAAChD,CAAD,CAFcgD,CAIT,CAAP;AAFGhD,KAmCE;AAGLkD,oBAjCkDlD,MACrB,iBAAzBI,QAAQC,GAARD,CAAYE,QAAa,IAC3BR,EAAiBC,CAAjBD,EAAuBE,CAAvBF,CAD2B,EAGtBc,EAAYZ,CAAZY,CAJ2CZ,CA8B7C;AAILwB,qBAJK;AAKL2B,cA5BoB,MAAMvC,CAuBrB;AAMLwC,cA3BqBC;AACrB,UAAIxC,CAAJ,EACEA,EAAe;AAAEQ,cAAMlB,CAAR;AAAsBoB,WAAc8B;AAApC,OAAfxC,EADF,KAEO;AACL,cAAM0B,IAAkB3B,CAAxB;AACAA,YAAcyC,CAAdzC,EACAoB,EAAgBO,CAAhBP,EAAiCpB,CAAjCoB,CADApB;AACiCA;AAAAA,KAe9B;AAOLwB,cAlBsBhB;AACtB,UAAIP,CAAJ,EACEA,EAAeO,CAAfP,EADF,KAEO;AACL,cAAM0B,IAAkB3B,CAAxB;AACAA,YAAcH,EAAQG,CAARH,EAAqBW,CAArBX,CAAdG,EACAoB,EAAgBO,CAAhBP,EAAiCpB,CAAjCoB,CADApB;AAGF;AAAA,aAAOQ,CAAP;AAAOA;AAGF,GAAP;AAHSA,CAxJX;AAAA,MCYakC,IAA4B5C,KACzBF,EAAgB,CAACW,CAAD,EAAeoC,CAAf,KAAkCpC,CAAlDX,EAAyDE,CAAzDF,CDbhB;AAAA,MEmBagD,IAAc,UACzB/C,CADyB;AAAA,MAGzBC,CAHyB,uEAGFD,OAAgBgD,CAAhBhD,EAA2B;AAAEY,eAAMoC;AAAR,GAA3BhD,CAHE;AAAA,MAIzBiD,CAJyB;AAAA,SAOrBA,IAAiBA,EAASF,CAATE,EAAsBjD,CAAtBiD,EAA+BhD,CAA/BgD,CAAjBA,GACUlD,EAAgBC,CAAhBD,EAAyBE,CAAzBF,CARW;AAAA,CFnB3B;AAAA,MG0CamD,IAAmB;AAC9B,OAAMC,OAAeC,4BAArB,EAAmD,OAAQC,KAAWA,CAAnB;;AACnD;AAAMC,YAAEA,CAAR;AAAMC,WAAUA;AAAhB,MApDsB;AACtB,QAAIC,CAAJ,EACIC,CADJ;AA8CA,WAAO;AAAEH,cA5COP,KAAqB,CAAC/C,CAAD,EAAeC,CAAf,EAAkCgD,CAAlC,KAAkCA;AAGrE,YAFAO,IAAexD,CAAfwD,EACAC,IAAoBxD,CADpBuD,EAEIP,CAAJ,EAAc,OAAOA,EAASF,CAATE,EAAsBjD,CAAtBiD,EAA+BhD,CAA/BgD,CAAP;AACd,cAAMS,IAAQX,EAAY/C,CAAZ+C,EAAqB9C,CAArB8C,CAAd;AACA,qBACKW,CADL,EACKA;AACHzB,0BAAiB1C;AACf,mBAAOoE,CAAP,IAAgBD,EAAMzB,cAANyB,CAAqBnE,CAArBmE,CAAhB;AAEA,mBAAO,CAACC,CAAD,EAAQ;AAAQ,wBAAUlE,KAAV,CADV,2CACU;AADV,aACN,CAAP;AADa;AAHZiE,SADL;AAIiB,OAmCZ;AAAUH,aA9BFR,KAAqB,CAAC/C,CAAD,EAAeC,CAAf,EAAkCgD,CAAlC,KAAkCA;AACpE,YAAIA,CAAJ,EAAc,OAAOA,EAASF,CAATE,EAAsBjD,CAAtBiD,EAA+BhD,CAA/BgD,CAAP;AACd,cAAMS,IAAQX,EAAYS,CAAZT,EAA0BU,CAA1BV,CAAd;AACA,YAAIa,UACC5D,EAAQC,CAARD,EAAQC;AAvBWW,gBAAM;AAuBjBX,SAARD,CADD4D,EAECH,CAFDG,CAAJ;AAIA,cACMvD,IAAiB,EADvB;AAgBA,qBACKqD,CADL,EACKA;AACHhB,oBAlBe,MAAMkB,CAiBlBF;AAEH/B,oBAjBgBhB,MAChBiD,IAAW5D,EAAQ4D,CAAR5D,EAAkBW,CAAlBX,CAAX4D,EACAF,EAAMf,QAANe,CAAeE,EAASC,cAATD,CAAwBA,EAASE,iBAAjCF,EAAoDlD,KAAnEgD,CADAE,EAEAvD,EAAUC,OAAVD,CAAmBgD,KAAWA,GAA9BhD,CAFAuD,EAGOjD,CAJSA,CAeb+C;AAGHK,qBAZiBzC,MACjBjB,EAAU2D,IAAV3D,CAAeiB,CAAfjB,GACoB;AAClB,kBAAM4D,IAAQ5D,EAAU6D,OAAV7D,CAAkBiB,CAAlBjB,CAAd;AACAA,cAAU8D,MAAV9D,CAAiB4D,CAAjB5D,EAAwB,CAAxBA;AAAwB,WAJTiB;AASdoC,SADL;AAJ4B;AAWvB,KAAP;AAX8B,GApCR,GAoDtB;;AACA,SAzDc;AAAA,sCAAIU,CAAJ;AAAIA,OAAJ;AAAA;;AAAA,WAAmBA,EAAIC,MAAJD,CAAW,CAACE,CAAD,EAAIC,CAAJ,KAAU;AAAA,aAAoBD,EAAEC,eAAFD,CAApB;AAAA,KAArBF,CAAnB;AAAA,IA0DZd,CA1DY,EA2DXH,OAAeC,4BAAfD,EA3DW,EA4DZI,CA5DY,CAyDd;AAGEA,CHhDJ;;AGgDIA","names":["validateStateKey","keys","stateKey","includes","Error","UPDATE_STATE","process","env","NODE_ENV","Symbol","createContainer","reducer","initialState","Object","globalState","linkedDispatch","listeners","forEach","key","Set","patchedReducer","state","action","type","r","e","setGlobalState","update","updater","previousState","oldValue","newValue","nextPartialState","listener","notifyListeners","prevState","nextState","useGlobalStateProvider","dispatch","useReducer","useEffect","prevGlobalState","useRef","current","useGlobalState","partialState","setPartialState","useState","add","delete","useCallback","u","getGlobalState","getState","setState","nextGlobalState","createGlobalState","_action","createStore","undefined","enhancer","reduxDevToolsExt","window","__REDUX_DEVTOOLS_EXTENSION__","f","before","after","savedReducer","savedInitialState","store","value","devState","computedStates","currentStateIndex","subscribe","push","index","indexOf","splice","fns","reduce","p","c"],"sources":["/home/gabriel/Desktop/My_tasks/Nexus/front-end/node_modules/react-hooks-global-state/src/createContainer.ts","/home/gabriel/Desktop/My_tasks/Nexus/front-end/node_modules/react-hooks-global-state/src/createGlobalState.ts","/home/gabriel/Desktop/My_tasks/Nexus/front-end/node_modules/react-hooks-global-state/src/createStore.ts","/home/gabriel/Desktop/My_tasks/Nexus/front-end/node_modules/react-hooks-global-state/src/devtools.ts"],"sourcesContent":["import {\n  Dispatch,\n  Reducer,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\n\n// utility functions\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst isFunction = (fn: unknown): fn is Function => (typeof fn === 'function');\n\nconst updateValue = <Value>(oldValue: Value, newValue: SetStateAction<Value>) => {\n  if (isFunction(newValue)) {\n    return newValue(oldValue);\n  }\n  return newValue;\n};\n\nconst validateStateKey = (keys: string[], stateKey: string) => {\n  if (!keys.includes(stateKey)) {\n    throw new Error(`'${stateKey}' not found. It must be provided in initialState as a property key.`);\n  }\n};\n\n// constants\n\nconst UPDATE_STATE = (\n  process.env.NODE_ENV !== 'production' ? Symbol('UPDATE_STATE')\n  /* for production */ : Symbol()\n);\n\nconst PROP_UPDATER = 'r';\nconst PROP_STATE = 'e';\n\n// createContainer\n\nexport const createContainer = <State, Action>(\n  reducer: Reducer<State, Action>,\n  initialState: State,\n) => {\n  type StateKeys = keyof State;\n  const keys = Object.keys(initialState);\n\n  let globalState = initialState;\n\n  type PA1 = { type: typeof UPDATE_STATE; [PROP_UPDATER]: (prev: State) => State };\n  type PA2 = { type: typeof UPDATE_STATE; [PROP_STATE]: State };\n  type PatchAction = PA1 | PA2;\n  let linkedDispatch: Dispatch<Action | PatchAction> | null = null;\n\n  const listeners = {} as {\n    [StateKey in StateKeys]: Set<Dispatch<SetStateAction<State[StateKey]>>>;\n  };\n  keys.forEach((key) => { listeners[key as StateKeys] = new Set(); });\n\n  const patchedReducer = (state: State, action: Action | PatchAction) => {\n    // how can it be typed more properly?\n    if ((action as { type: unknown }).type === UPDATE_STATE) {\n      return (action as { [PROP_UPDATER]: unknown })[PROP_UPDATER]\n        ? (action as PA1)[PROP_UPDATER](state)\n        : (action as PA2)[PROP_STATE];\n    }\n    return reducer(state, action as Action);\n  };\n\n  const setGlobalState = <StateKey extends StateKeys>(\n    stateKey: StateKey,\n    update: SetStateAction<State[StateKey]>,\n  ) => {\n    if (process.env.NODE_ENV !== 'production') {\n      validateStateKey(keys, stateKey as string);\n    }\n    const updater = (previousState: State): State => ({\n      ...previousState,\n      [stateKey]: updateValue(previousState[stateKey], update),\n    });\n    if (linkedDispatch) {\n      linkedDispatch({ type: UPDATE_STATE, [PROP_UPDATER]: updater });\n    } else {\n      globalState = updater(globalState);\n      const nextPartialState = globalState[stateKey];\n      listeners[stateKey].forEach((listener) => listener(nextPartialState));\n    }\n  };\n\n  const notifyListeners = (prevState: State, nextState: State) => {\n    keys.forEach((key) => {\n      const nextPartialState = nextState[key as StateKeys];\n      if (prevState[key as StateKeys] !== nextPartialState) {\n        listeners[key as StateKeys].forEach((listener) => listener(nextPartialState));\n      }\n    });\n  };\n\n  const useGlobalStateProvider = () => {\n    const [state, dispatch] = useReducer(patchedReducer, globalState);\n    useEffect(() => {\n      if (linkedDispatch) throw new Error('Only one global state provider is allowed');\n      linkedDispatch = dispatch;\n      // in case it's changed before this effect is handled\n      dispatch({ type: UPDATE_STATE, [PROP_STATE]: globalState });\n      const cleanup = () => {\n        linkedDispatch = null;\n      };\n      return cleanup;\n    }, []);\n    const prevGlobalState = useRef(state);\n    notifyListeners(prevGlobalState.current, state);\n    prevGlobalState.current = state;\n    useEffect(() => {\n      globalState = state;\n    }, [state]);\n  };\n\n  const useGlobalState = <StateKey extends StateKeys>(stateKey: StateKey) => {\n    if (process.env.NODE_ENV !== 'production') {\n      validateStateKey(keys, stateKey as string);\n    }\n    const [partialState, setPartialState] = useState(globalState[stateKey]);\n    useEffect(() => {\n      listeners[stateKey].add(setPartialState);\n      setPartialState(globalState[stateKey]); // in case it's changed before this effect is handled\n      const cleanup = () => {\n        listeners[stateKey].delete(setPartialState);\n      };\n      return cleanup;\n    }, [stateKey]);\n    const updater = useCallback(\n      (u: SetStateAction<State[StateKey]>) => setGlobalState(stateKey, u),\n      [stateKey],\n    );\n    return [partialState, updater] as const;\n  };\n\n  const getGlobalState = <StateKey extends StateKeys>(stateKey: StateKey) => {\n    if (process.env.NODE_ENV !== 'production') {\n      validateStateKey(keys, stateKey as string);\n    }\n    return globalState[stateKey];\n  };\n\n  const getWholeState = () => globalState;\n\n  const setWholeState = (nextGlobalState: State) => {\n    if (linkedDispatch) {\n      linkedDispatch({ type: UPDATE_STATE, [PROP_STATE]: nextGlobalState });\n    } else {\n      const prevGlobalState = globalState;\n      globalState = nextGlobalState;\n      notifyListeners(prevGlobalState, globalState);\n    }\n  };\n\n  const dispatchAction = (action: Action) => {\n    if (linkedDispatch) {\n      linkedDispatch(action);\n    } else {\n      const prevGlobalState = globalState;\n      globalState = reducer(globalState, action);\n      notifyListeners(prevGlobalState, globalState);\n    }\n    return action;\n  };\n\n  return {\n    useGlobalStateProvider,\n    useGlobalState,\n    getGlobalState,\n    setGlobalState,\n    getState: getWholeState,\n    setState: setWholeState, // for devtools.js\n    dispatch: dispatchAction,\n  };\n};\n","import { createContainer } from './createContainer';\n\ntype ExportFields =\n  | 'useGlobalStateProvider'\n  | 'useGlobalState'\n  | 'getGlobalState'\n  | 'setGlobalState';\n\n/**\n * create a global state\n *\n * It returns a set of functions\n * - `useGlobalState`: a custom hook works like React.useState\n * - `getGlobalState`: a function to get a global state by key outside React\n * - `setGlobalState`: a function to set a global state by key outside React\n *\n * @example\n * import { createGlobalState } from 'react-hooks-global-state';\n *\n * const { useGlobalState } = createGlobalState({ count: 0 });\n *\n * const Component = () => {\n *   const [count, setCount] = useGlobalState('count');\n *   ...\n * };\n */\nexport const createGlobalState = <State>(initialState: State) => {\n  const store = createContainer((state: State, _action: never) => state, initialState);\n  return store as Pick<typeof store, ExportFields>;\n};\n","import { Reducer } from 'react';\n\nimport { createContainer } from './createContainer';\n\ntype Enhancer<Creator> = (creator: Creator) => Creator;\n\ntype ExportFields =\n  | 'useGlobalStateProvider'\n  | 'useGlobalState'\n  | 'getState'\n  | 'dispatch';\n\n/**\n * create a global store\n *\n * In additon to `useGlobaState` which is the same hook as in createGlobalState,\n * a store has `getState` and `dispatch`.\n * A store works somewhat similarly to Redux, but not the same.\n *\n * @example\n * import { createStore } from 'react-hooks-global-state';\n *\n * const initialState = { count: 0 };\n * const reducer = ...;\n *\n * const store = createStore(reducer, initialState);\n * const { useGlobalState } = store;\n *\n * const Component = () => {\n *   const [count, setCount] = useGlobalState('count');\n *   ...\n * };\n */\nexport const createStore = <State, Action>(\n  reducer: Reducer<State, Action>,\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  initialState: State = (reducer as any)(undefined, { type: undefined }),\n  enhancer?: Enhancer<any>,\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n) => {\n  if (enhancer) return enhancer(createStore)(reducer, initialState) as never;\n  const store = createContainer(reducer, initialState);\n  return store as Pick<typeof store, ExportFields>;\n};\n","/* eslint @typescript-eslint/no-explicit-any: off */\n\nconst compose = (...fns: any[]) => fns.reduce((p, c) => (...args: any[]) => p(c(...args)));\n\nconst initAction = () => ({ type: '@@redux/INIT' });\n\nconst createEnhancers = () => {\n  let savedReducer: any;\n  let savedInitialState: any;\n  const before = (createStore: any) => (reducer: any, initialState: any, enhancer: any) => {\n    savedReducer = reducer;\n    savedInitialState = initialState;\n    if (enhancer) return enhancer(createStore)(reducer, initialState);\n    const store = createStore(reducer, initialState);\n    return {\n      ...store,\n      useGlobalState: (stateKey: any) => {\n        const [value] = store.useGlobalState(stateKey);\n        const MESG = 'Update is not allowed when using DevTools';\n        return [value, () => { throw new Error(MESG); }];\n      },\n    };\n  };\n  const after = (createStore: any) => (reducer: any, initialState: any, enhancer: any) => {\n    if (enhancer) return enhancer(createStore)(reducer, initialState);\n    const store = createStore(savedReducer, savedInitialState);\n    let devState = {\n      ...reducer(initialState, initAction()),\n      ...savedInitialState,\n    };\n    const getState = () => devState;\n    const listeners: any = [];\n    const dispatch = (action: any) => {\n      devState = reducer(devState, action);\n      store.setState(devState.computedStates[devState.currentStateIndex].state);\n      listeners.forEach((f: any) => f());\n      return action;\n    };\n    const subscribe = (listener: any) => {\n      listeners.push(listener);\n      const unsubscribe = () => {\n        const index = listeners.indexOf(listener);\n        listeners.splice(index, 1);\n      };\n      return unsubscribe;\n    };\n    return {\n      ...store,\n      getState,\n      dispatch,\n      subscribe,\n    };\n  };\n  return { before, after };\n};\n\nexport const reduxDevToolsExt = () => {\n  if (!(window as any).__REDUX_DEVTOOLS_EXTENSION__) return (f: any) => f;\n  const { before, after } = createEnhancers();\n  return compose(\n    before,\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__(),\n    after,\n  );\n};\n"]},"metadata":{},"sourceType":"module"}